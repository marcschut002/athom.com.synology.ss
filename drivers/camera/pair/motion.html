<link href="../assets/css/styles.css" rel="stylesheet" type="text/css"/>
<script>
    const motion_form = document.getElementById('motion-form');
    motion_form.onsubmit = submit;

    window.scrollTo(0, 0);

    function submit(event) {

        // show loading overlay
        Homey.showLoadingOverlay();

        var data = {
            'motion_detection': document.getElementById("motion_detection").checked,
        };

        Homey.emit( 'motion', data, function( err, result ){
            if(err !== null) {
                Homey.hideLoadingOverlay();
                // show error if any
                Homey.alert(err, 'error');
            } else if(result===true) {
                Homey.showView('list_devices');
            } else {
                Homey.hideLoadingOverlay();
                Homey.alert(result, 'error');
            }
        });

        // For this example, don't actually submit the form
        event.preventDefault();
    }
</script>
<div class="hy-tmpl-api-logo">
    <img class="my-svg" src="../assets/svg/motion.svg" alt="motion">
</div>
<p data-i18n="pair.motion.description"></p>
<form id="motion-form" class="hy-tmpl-motion-form" action="/" method="post">
    <div class="hy-tmpl-motion-row row">
        <label class="switch">
            <input class="hy-nostyle" name="motion_detection" type="checkbox" id="motion_detection" value="">
            <span class="slider round"></span>
        </label>
    </div>
    <div class="hy-tmpl-motion-row row">
        <input class="hy-button hy-button-primary hy-button-fill hy-motion-submit button" type="submit" value="Volgende">
    </div>
</form>
<p class="footnote" data-i18n="pair.motion.footnote"></p>

